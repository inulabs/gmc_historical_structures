<DesktopScreenView>
    MDBoxLayout:
        orientation: 'vertical'

        MDTopAppBar:
            title: "Structures"
            elevation: 10
            left_action_items: [['menu', lambda x: nav_drawer.set_state('toggle')]]
            right_action_items: [['minus', lambda x: root.parent.delete_record()],['plus', lambda x: root.parent.new_record()],['chevron-left', lambda x: root.parent.skip(-1)], ['chevron-right', lambda x: root.parent.skip(1)],["dots-vertical", lambda x: root.structure_nav_open(x)]]
        Widget:
            size_hint_y: None
            height: dp(1)

        MDTabs:
            id: tabs

            Tab:
                icon:"information"
                title: "Details"
                ScrollView:
                    size_hint: 1,1
                    smooth_scroll_end: dp(10)
                    effect_cls: "ScrollEffect"
                    bar_width:dp(10)

                    MDBoxLayout:
                        orientation: "vertical"
                        adaptive_height: True
                        spacing: "4dp"
                        padding: "4dp"
#                        md_bg_color: app.theme_cls.disabled_hint_text_color

                        MDGridLayout:
                            cols: 3
                            adaptive_height: True
                            spacing: "4dp"
                            padding: "4dp"
#                           md_bg_color: app.theme_cls.disabled_hint_text_color

                            MDTextField:
                                id: name
                                hint_text: "Name"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_name(self.focus, self.text)


                            MDRaisedButton:
                                id: type
                                text: "PRESS ME"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                on_release: root.menu.open()


#                            MDDropDownItem:
#                                id: type
#                                text: "Type"
#                                items: root.parent.structure_types
#                                on_select: root.parent.set_type(self.focus, self.text)


#                            MDLabel:
#                                id: type
#                                text: "Type"
#                                color: app.theme_cls.text_color
#                                size_hint: (None, None)
#                                markup: True
#                                size: (dp(300), dp(30))

                            MDLabel:
                                id: id
                                text: "Id"
                                color: app.theme_cls.text_color
                                size_hint: (None, None)
                                markup: True
                                size: (dp(300), dp(30))

                        MDTextField:
                            id: description
                            multiline: True
                            hint_text: "Description"
                            halign: "left"
                            color: app.theme_cls.text_color
                            on_focus: root.parent.set_description(self.focus, self.text)

                        MDTextField:
                            id: location
                            multiline: True
                            hint_text: "Location"
                            halign: "left"
                            color: app.theme_cls.text_color
                            on_focus: root.parent.set_description(self.focus, self.text)

                        MDGridLayout:
                            cols: 2
                            adaptive_height: True
                            spacing: "4dp"
                            padding: "4dp"
 #                           md_bg_color: app.theme_cls.disabled_hint_text_color

                            MDTextField:
                                id: built_date
                                hint_text: "Build Date"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_built_date(self.focus, self.text)
                            MDTextField:
                                id: removal_date
                                hint_text: "Removal Date"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_removal_date(self.focus, self.text)

                        MDGridLayout:
                            cols: 3
                            adaptive_height: True
                            spacing: "4dp"
                            padding: "4dp"
#                           md_bg_color: app.theme_cls.disabled_hint_text_color

                            MDTextField:
                                id: latitude
                                hint_text: "Latitude"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_latitude(self.focus, self.text)

                            MDTextField:
                                id: longitude
                                hint_text: "Longitude"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_longitude(self.focus, self.text)


                            MDTextField:
                                id: elevation
                                hint_text: "Elevation"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_elevation(self.focus, self.text)


                        MDGridLayout:
                            cols: 2
                            adaptive_height: True
                            spacing: "4dp"
                            padding: "4dp"
#                           md_bg_color: app.theme_cls.disabled_hint_text_color

                            MDTextField:
                                id: division
                                hint_text: "Division"
                                halign: "left"
                                color: app.theme_cls.text_color
                                on_focus: root.parent.set_division(self.focus, self.text)

                            MDRaisedButton:
                                id: section
                                text: "Select Section"
                                pos_hint: {"center_x": .5, "center_y": .5}
                                on_release: root.sections_menu.open()
#                            MDTextField:
#                                id: section
#                                hint_text: "Section"
#                                halign: "left"
#                                color: app.theme_cls.text_color
#                                on_focus: root.parent.set_section(self.focus, self.text)
            Tab:
                icon:"image"
                title: "Photos"
                ScrollView:
                    MDGridLayout:
                        cols: 3
                        row_default_height:  dp(600) #(self.width - self.cols * self.spacing[0]) / self.cols
                        row_force_default: True
                        adaptive_height: True
                        padding: dp(4), dp(4)
                        spacing: dp(4)
                        id: photos


                BoxLayout:
                    orientation: "vertical"

                    MDRoundFlatIconButton:
                        text: "Upload Photo"
                        icon: "photo"
                        on_release: root.file_manager_open()
    MDNavigationDrawer:
        id: nav_drawer
        ContentNavigationDrawer:



<ImageBox>:
    MDGridLayout:
        cols: 1
        #orientation: 'vertical'
        Image:
            id: image
            size_hint: None, None
            size: dp(500), dp(500)
 #           src: root.image.path
        MDTextField:
            id: title
            hint_text: "Title"
            halign: "left"
            color: app.theme_cls.text_color
            on_focus: root.set_image_title(self.focus, self.text)
        MDTextField:
            id: image_date
            multiline: False
            hint_text: "Date"
            halign: "left"
            color: app.theme_cls.text_color
            on_focus: root.set_image_date(self.focus, self.text)

        MDTextField:
            id: caption
            multiline: False
            hint_text: "Caption"
            halign: "left"
            color: app.theme_cls.text_color
            on_focus: root.set_image_caption(self.focus, self.text)

        MDTextField:
            id: description
            multiline: True
            hint_text: "Description"
            halign: "left"
            color: app.theme_cls.text_color
            on_focus: root.set_image_description(self.focus, self.text)

        MDRaisedButton:
            id: delete
            text: "Delete"
            pos_hint: {"center_x": .5, "center_y": .5}
            on_release: root.delete_image()
